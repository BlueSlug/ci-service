- job:
    name: 'update-jenkins-job-definitions'
    node: master
    project-type: 'freestyle'
    display-name: 'update-jenkins-job-definitions'
    scm:
        - git:
            url: git@github.com:inclusive-design/ci-service.git
            credentials-id: 7ffafe1a-7ab2-4e9d-899c-5f068ad10b9c
            git-config-name: idrc-deploy
            git-config-email: idrc.ops@gmail.com
            branches:
                - master
    triggers:
      - github

    builders:      
      - shell: /usr/bin/jenkins-jobs --conf /etc/jenkins_jobs.ini update --delete-old ./jenkins_jobs

    logrotate:
      daysToKeep: 7

    publishers:
      - email:
          recipients: idi-ops@lists.inclusivedesign.ca
